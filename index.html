<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>SHEFO Store | Ø¨Ø±Ø§Ù†Ø¯ Ø´ÙŠÙÙˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&display=swap" rel="stylesheet">

<style>
/* --- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ Ø§Ù„Ù…Ù†ÙˆØ± Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ (Glow System) --- */
:root { --bg-main: #020617; --bg-surface: #0f172a; --primary: #d97706; --primary-glow: #fbbf24; --text: #f1f5f9; --border: #1e293b; --success: #10b981; --danger: #ef4444; }
* {box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent;}
body { margin: 0; font-family: 'Tajawal', sans-serif; background: var(--bg-main); color: var(--text); padding-bottom: 0; overflow-x: hidden; }

/* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.splash-screen { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column; transition: opacity 0.5s ease-out; }
.splash-logo { font-size: 3rem; font-weight: 900; background: linear-gradient(45deg, var(--primary), var(--primary-glow)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: pulseLogo 1.5s infinite alternate; }
.loader-bar { width: 150px; height: 4px; background: #1e293b; margin-top: 20px; border-radius: 2px; overflow: hidden; }
.loader-progress { width: 0%; height: 100%; background: var(--primary); animation: loadProgress 2s ease-in-out forwards; }
@keyframes pulseLogo { from{transform:scale(1); opacity:0.8;} to{transform:scale(1.1); opacity:1;} }
@keyframes loadProgress { 0%{width:0%} 100%{width:100%} }

/* Ø§Ù„Ø´Ø±ÙŠØ· ÙˆØ§Ù„Ø¹Ø¯Ø§Ø¯ */
.top-ticker { background: linear-gradient(90deg, #b45309, #d97706); color: white; font-size: 0.85rem; padding: 6px 0; overflow: hidden; white-space: nowrap; position: relative; z-index: 101; }
.ticker-text { display: inline-block; animation: scrollText 20s linear infinite; padding-left: 100%; font-weight: bold; }
@keyframes scrollText { 0% { transform: translateX(0); } 100% { transform: translateX(100%); } }

header { background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(15px); padding: 10px 20px; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; box-shadow: 0 5px 20px rgba(0,0,0,0.3); }
.brand { font-size: 1.6rem; font-weight: 900; background: linear-gradient(45deg, var(--primary), var(--primary-glow)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; cursor: pointer; letter-spacing: 1px; }

/* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù…Ù„ÙˆÙ†Ø© ÙˆÙ…Ù†ÙˆØ±Ø© ØµØ§Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
.glow-icons { display: flex; gap: 12px; background: rgba(255, 255, 255, 0.05); padding: 6px 12px; border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.1); }
.glow-icons a { text-decoration: none; font-size: 1.3rem; transition: transform 0.3s; display:flex; }
.fa-whatsapp { color: #25D366; } .fa-facebook { color: #1877F2; } .fa-instagram { color: #E1306C; }
.glow-icons a:hover { transform: scale(1.2); filter: brightness(1.2); }

/* Ø§Ù„Ø³Ø§Ø¹Ø© ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… */
.clock-wrapper { display: flex; justify-content: center; margin-bottom: 20px; }
.analog-clock { width: 140px; height: 140px; border: 4px solid var(--primary); border-radius: 50%; position: relative; background: radial-gradient(circle, #1e293b 0%, #020617 100%); box-shadow: 0 0 20px rgba(217, 119, 6, 0.3); }
.hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom center; background: white; border-radius: 4px; transform: translateX(-50%); z-index: 2; }
.hand.hour { width: 4px; height: 35px; background: var(--text); }
.hand.minute { width: 3px; height: 50px; background: var(--primary-glow); }
.hand.second { width: 2px; height: 55px; background: var(--danger); z-index: 3; }
.clock-center { position: absolute; top: 50%; left: 50%; width: 12px; height: 12px; background: var(--primary); border-radius: 50%; transform: translate(-50%, -50%); z-index: 4; box-shadow: 0 0 5px var(--primary-glow); }
.clock-number { position: absolute; width: 20px; height: 20px; text-align: center; color: var(--primary-glow); font-size: 14px; font-weight: bold; transform: translate(-50%, -50%); font-family: monospace; }

/* Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø´ÙŠÙƒ */
.hero { text-align: center; padding: 40px 20px 20px; background: radial-gradient(circle at top, #1e293b 0%, var(--bg-main) 70%); }
.hero h2 { font-size: 2.2rem; margin: 0; color: white; text-shadow: 0 0 20px rgba(255,255,255,0.1); font-weight: 900; }
.tagline { color: var(--primary-glow); font-size: 1rem; margin-bottom: 25px; font-weight: 500; text-shadow: 0 0 10px rgba(251, 191, 36, 0.3); }

.flash-sale-box { background: rgba(255,255,255,0.05); border: 2px solid var(--primary); border-radius: 15px; padding: 15px; margin: 15px auto; display: none; min-width: 250px; box-shadow: 0 0 20px rgba(217, 119, 6, 0.2); }
.timer-display { font-family: monospace; font-size: 2.2rem; color: white; letter-spacing: 2px; background: #000; padding: 5px 15px; border-radius: 8px; margin-bottom: 5px; }

/* ÙƒÙˆØ¯ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø´ÙŠÙƒ */
.copy-promo-card { background: rgba(217, 119, 6, 0.1); border: 1px dashed var(--primary); border-radius: 10px; padding: 10px 15px; margin-top: 10px; cursor: pointer; transition: 0.3s; display: inline-flex; align-items: center; gap: 10px; color: var(--primary-glow); font-weight: bold; }
.copy-promo-card:hover { background: rgba(217, 119, 6, 0.2); transform: scale(1.05); box-shadow: 0 0 15px rgba(217, 119, 6, 0.2); }

/* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ù†ÙˆØ±Ø© */
.nav-scroller { display: flex; gap: 10px; overflow-x: auto; padding: 10px 15px 25px; scrollbar-width: none; }
.nav-item { background: var(--bg-surface); color: #94a3b8; border: 1px solid var(--border); padding: 10px 25px; border-radius: 50px; white-space: nowrap; cursor: pointer; transition: 0.3s; font-family: inherit; font-size: 0.95rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
.nav-item.active, .nav-item:hover { background: var(--primary); color: black; border-color: var(--primary-glow); font-weight: bold; box-shadow: 0 0 15px var(--primary); }

/* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆÙˆÙ…ÙŠØ¶ Ø§Ù„ØªØ­Ø°ÙŠØ± */
#products { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; padding: 15px; }
.card { background: var(--bg-surface); border-radius: 15px; border: 1px solid var(--border); overflow: hidden; transition: 0.3s; display: flex; flex-direction: column; position: relative; }
.card img { width: 100%; height: 280px; object-fit: contain; background: #fff; padding: 10px; border-bottom: 1px solid var(--border); }
.stock-warning { color: var(--danger); animation: pulse-red 1.5s infinite; font-weight: bold; font-size: 0.8rem; margin-top: 5px; display: block; }
@keyframes pulse-red { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

/* Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ù†ÙˆØ±Ø© */
.checkout-box { margin: 30px 15px; padding: 30px 20px; border-radius: 25px; background: #1e293b; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
.checkout-box h3 { color: var(--primary); margin-bottom: 25px; text-shadow: 0 0 10px rgba(217, 119, 6, 0.2); }
.custom-input { width: 100%; padding: 15px; background: var(--bg-main); border: 1px solid var(--border); border-radius: 12px; color: white; margin-bottom: 12px; font-family: inherit; font-size: 1rem; transition: 0.3s; }
.custom-input:focus { border-color: var(--primary); box-shadow: 0 0 15px rgba(217, 119, 6, 0.3); background: #0a0f1d; }
.btn-main { width: 100%; padding: 16px; border: none; border-radius: 12px; background: linear-gradient(135deg, var(--primary), #b45309); color: white; font-weight: bold; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 5px 15px rgba(180, 83, 9, 0.3); transition: 0.3s; }
.btn-main:hover { transform: translateY(-2px); filter: brightness(1.1); box-shadow: 0 8px 20px rgba(180, 83, 9, 0.4); }

/* Ø§Ù„ÙÙˆØªØ± ÙˆÙƒØ±ÙŠØ¯Øª Ø§Ù„Ù…Ø·ÙˆØ± (Ziad Hany) */
footer { text-align: center; padding: 50px 20px; background: #000; margin-top: 50px; border-top: 1px solid var(--border); }
.developer-credit { margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 0.95rem; color: #94a3b8; display: flex; flex-direction: column; align-items: center; gap: 8px; }
.dev-name { color: var(--primary-glow); font-weight: 800; text-decoration: none; font-size: 1.1rem; transition: 0.3s; }

/* Ø§Ù„Ø¯Ø§Ø´ Ø¨ÙˆØ±Ø¯ Ø§Ù„Ù…Ù†ÙˆØ±Ø© */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; place-items: center; z-index: 200; }
.modal-content { background: var(--bg-surface); width: 95%; max-width: 500px; padding: 25px; border-radius: 20px; border: 1px solid var(--border); max-height: 90vh; overflow-y: auto; }
.stat-box { background: linear-gradient(135deg, #1e293b, #0f172a); padding: 15px; border-radius: 12px; text-align: center; border: 1px solid var(--border); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
.qty-input { width: 60px; padding: 5px; background: #020617; border: 1px solid #334155; color: white; text-align: center; border-radius: 5px; }

.wa-float { position: fixed; bottom: 25px; right: 25px; background: #25D366; color: white; width: 65px; height: 65px; border-radius: 50%; display: grid; place-items: center; font-size: 32px; box-shadow: 0 0 20px rgba(37,211,102,0.6); z-index: 990; animation: pulse 2s infinite; }
.toast-box { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: rgba(16, 185, 129, 0.9); color: white; padding: 10px 20px; border-radius: 50px; z-index: 2000; transition: 0.4s; backdrop-filter: blur(5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
.toast-box.show { transform: translateX(-50%) translateY(0); }
</style>
</head>
<body>

<div class="splash-screen" id="splash">
    <div class="splash-logo">SHEFO</div>
    <div class="loader-bar"><div class="loader-progress"></div></div>
</div>

<div class="top-ticker"><div class="ticker-text" id="tickerText">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div></div>

<header>
    <div class="brand" id="secretBtn" onclick="triggerSecret()">SHEFO</div>
    <div class="glow-icons">
        <a href="https://wa.me/201070411245" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://www.facebook.com/share/1DYwnY6RxZ/" target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://www.instagram.com/shefo_1k" target="_blank"><i class="fab fa-instagram"></i></a>
    </div>
    <div onclick="scrollToCheckout()" style="position:relative; cursor:pointer">
        <i class="fas fa-shopping-bag" style="font-size:1.5rem"></i>
        <span class="badge" id="cartCount">0</span>
    </div>
</header>

<div class="hero">
    <div class="clock-wrapper"><div class="analog-clock" id="clockFace"><div class="hand hour" id="hourHand"></div><div class="hand minute" id="minuteHand"></div><div class="hand second" id="secondHand"></div><div class="clock-center"></div></div></div>
    <h2>âœ¨ SHEFO STORE</h2>
    <div class="tagline">Ø¹Ø§Ù„Ù… Ù…Ù† Ø§Ù„ÙØ®Ø§Ù…Ø© ÙˆØ§Ù„ØªÙ…ÙŠØ² ÙÙŠ ÙƒÙ„ Ù‚Ø·Ø¹Ø© âœ¨</div>
    
    <div class="flash-sale-box" id="timerBox">
        <div style="color:var(--danger); font-size:0.8rem; margin-bottom:5px; font-weight:900; letter-spacing:1px">ğŸ”¥ Ø¹Ø±Ø¶ Ø®Ø§Øµ ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„:</div>
        <div id="countdown" class="timer-display">00:00:00</div>
        <div class="copy-promo-card" id="promoBtn" onclick="copyPromoCode()">
            <span id="promoLabel">Ø§Ø³ØªØ®Ø¯Ù… ÙƒÙˆØ¯: --</span>
            <i class="fas fa-copy"></i>
        </div>
    </div>

    <div style="margin:20px; position:relative">
        <input type="text" id="searchInp" class="custom-input" placeholder="Ø¯ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù„ÙŠ ÙŠØ¹Ø¬Ø¨Ùƒ..." onkeyup="searchProducts()" style="border-radius:30px; padding-right:45px">
        <i class="fas fa-search" style="position:absolute; right:20px; top:18px; color:#64748b"></i>
    </div>
</div>

<nav class="nav-scroller" id="navCatsUI"></nav>
<main id="products"></main>

<div class="checkout-box" id="checkoutSection">
    <h3><i class="fas fa-shipping-fast"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</h3>
    <div id="cartItems"></div>
    <div style="margin-top:15px; border-top:1px dashed #475569; padding-top:10px; display:flex; justify-content:space-between; font-weight:bold; font-size:1.2rem">
        <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> <span id="totalPrice" style="color:var(--primary)">0 Ø¬.Ù…</span>
    </div>
    <div id="discountMsg" style="color:var(--success); font-size:0.95rem; margin:10px 0; display:none; font-weight:bold"></div>
    
    <div style="display:flex; gap:10px; margin: 20px 0">
        <input id="couponInput" class="custom-input" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…" style="margin:0">
        <button onclick="applyCoupon()" class="custom-input" style="width:auto; background:var(--success); border:none; cursor:pointer; font-weight:bold">ØªÙØ¹ÙŠÙ„</button>
    </div>
    
    <input id="cName" class="custom-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
    <input id="cPhone" class="custom-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
    <select id="cCity" class="custom-input">
        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
        <option value="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option><option value="Ø§Ù„Ø¬ÙŠØ²Ø©">Ø§Ù„Ø¬ÙŠØ²Ø©</option><option value="Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©">Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</option>
        <option value="Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©">Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©</option><option value="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option><option value="Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©">Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©</option>
        <option value="Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©">Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©</option><option value="Ø§Ù„Ø¨Ø­ÙŠØ±Ø©">Ø§Ù„Ø¨Ø­ÙŠØ±Ø©</option><option value="Ø§Ù„ØºØ±Ø¨ÙŠØ©">Ø§Ù„ØºØ±Ø¨ÙŠØ©</option>
        <option value="Ø¨ÙˆØ±Ø³Ø¹ÙŠØ¯">Ø¨ÙˆØ±Ø³Ø¹ÙŠØ¯</option><option value="Ø¯Ù…ÙŠØ§Ø·">Ø¯Ù…ÙŠØ§Ø·</option><option value="Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©">Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©</option>
        <option value="Ø§Ù„Ø³ÙˆÙŠØ³">Ø§Ù„Ø³ÙˆÙŠØ³</option><option value="ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®">ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®</option><option value="Ø§Ù„ÙÙŠÙˆÙ…">Ø§Ù„ÙÙŠÙˆÙ…</option>
        <option value="Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ">Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ</option><option value="Ø§Ù„Ù…Ù†ÙŠØ§">Ø§Ù„Ù…Ù†ÙŠØ§</option><option value="Ø£Ø³ÙŠÙˆØ·">Ø£Ø³ÙŠÙˆØ·</option>
        <option value="Ø³ÙˆÙ‡Ø§Ø¬">Ø³ÙˆÙ‡Ø§Ø¬</option><option value="Ù‚Ù†Ø§">Ù‚Ù†Ø§</option><option value="Ø§Ù„Ø£Ù‚ØµØ±">Ø§Ù„Ø£Ù‚ØµØ±</option>
        <option value="Ø£Ø³ÙˆØ§Ù†">Ø£Ø³ÙˆØ§Ù†</option><option value="Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±">Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±</option><option value="Ø§Ù„ÙˆØ§Ø¯Ù‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯">Ø§Ù„ÙˆØ§Ø¯Ù‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯</option>
        <option value="Ù…Ø·Ø±ÙˆØ­">Ù…Ø·Ø±ÙˆØ­</option><option value="Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡">Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡</option><option value="Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡">Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡</option>
    </select>
    <input id="cAddress" class="custom-input" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„">
    <button onclick="sendOrder()" class="btn-main"><i class="fab fa-whatsapp"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨</button>
</div>

<footer>
    <h2 style="margin:0; color:white">SHEFO</h2>
    <div class="developer-credit">
        <span>Developed by <b style="color:var(--primary-glow)">Ziad Hany</b></span>
        <div style="margin-top:10px">
            <a href="https://wa.me/201033186744" target="_blank" style="color:#25D366; margin:0 10px; font-size:1.5rem"><i class="fab fa-whatsapp"></i></a>
            <a href="https://www.facebook.com/share/1AQsW9xde9/" target="_blank" style="color:#1877F2; font-size:1.5rem"><i class="fab fa-facebook"></i></a>
        </div>
    </div>
</footer>

<div class="modal" id="dashModal">
    <div class="modal-content">
        <h3 style="color:var(--primary); text-align:center">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… âš™ï¸</h3>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:15px">
            <div class="stat-box"><span id="realRevenue" style="color:var(--success); font-weight:bold; font-size:1.3rem">0</span><br><small>Ù…Ø¨ÙŠØ¹Ø§Øª</small></div>
            <div class="stat-box"><span id="netProfit" style="color:var(--primary-glow); font-weight:bold; font-size:1.3rem">0</span><br><small>ØµØ§ÙÙŠ Ø±Ø¨Ø­ ğŸ’°</small></div>
        </div>
        <div style="display:flex; gap:5px; overflow-x:auto; margin-bottom:15px; padding-bottom:5px">
            <button onclick="toggleTab('prod')" class="btn-main" style="padding:10px; font-size:0.8rem">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
            <button onclick="toggleTab('cats')" class="btn-main" style="padding:10px; font-size:0.8rem">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</button>
            <button onclick="toggleTab('manual')" class="btn-main" style="padding:10px; font-size:0.8rem; background:var(--primary-glow); color:black">Ø¨ÙŠØ¹Ø© ÙŠØ¯ÙˆÙŠØ©</button>
            <button onclick="toggleTab('coup')" class="btn-main" style="padding:10px; font-size:0.8rem">Ø§Ù„Ø®ØµÙ…</button>
            <button onclick="toggleTab('settings')" class="btn-main" style="padding:10px; font-size:0.8rem">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        </div>
        <div id="tab-prod">
            <input id="nPName" class="custom-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
            <div style="display:flex; gap:5px"><input id="nPPrice" type="number" class="custom-input" placeholder="Ø§Ù„Ø¨ÙŠØ¹"><input id="nPCost" type="number" class="custom-input" placeholder="Ø§Ù„ØªÙƒÙ„ÙØ©"><input id="nPQty" type="number" class="custom-input" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©"></div>
            <select id="nPCatSelect" class="custom-input"></select>
            <label style="display:block; background:#1e293b; border:1px dashed var(--primary); padding:10px; border-radius:10px; text-align:center; cursor:pointer; margin-bottom:10px">
                <i class="fas fa-camera"></i> Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© (Ù…Ù„Ù)
                <input type="file" id="nPFile" style="display:none" accept="image/*">
            </label>
            <input id="nPImgUrl" class="custom-input" placeholder="Ø£Ùˆ ÙˆØ¶Ø¹ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø¬Ø§Ù‡Ø²">
            <button onclick="addProduct()" class="btn-main">Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬ ğŸš€</button>
            <div id="adminList" style="margin-top:10px"></div>
        </div>
        <div id="tab-cats" style="display:none"><input id="newCatInput" class="custom-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"><button onclick="addCategory()" class="btn-main">Ø¥Ø¶Ø§ÙØ©</button><div id="catsAdminList" style="margin-top:10px"></div></div>
        <div id="tab-manual" style="display:none"><input id="mPrice" type="number" class="custom-input" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"><input id="mCost" type="number" class="custom-input" placeholder="Ø§Ù„ØªÙƒÙ„ÙØ©"><button onclick="addManualOrder()" class="btn-main">ØªØ³Ø¬ÙŠÙ„ Ø±Ø¨Ø­ ÙŠØ¯ÙˆÙŠ ğŸ’°</button></div>
        <div id="tab-coup" style="display:none">
            <input id="nCCode" class="custom-input" placeholder="Ø§Ù„ÙƒÙˆØ¯">
            <select id="nCType" class="custom-input"><option value="fixed">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª (Ø¬.Ù…)</option><option value="percent">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© (%)</option></select>
            <input id="nCVal" type="number" class="custom-input" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø©"><input id="nCExpiry" type="datetime-local" class="custom-input">
            <button onclick="saveCoupon()" class="btn-main">ØªÙØ¹ÙŠÙ„</button><button onclick="deleteCoupon()" class="btn-main" style="background:var(--danger); margin-top:10px">Ø­Ø°Ù</button>
        </div>
        <div id="tab-settings" style="display:none"><input id="nTicker" class="custom-input" placeholder="Ù†Øµ Ø§Ù„Ø´Ø±ÙŠØ·"><input id="nTimerEnd" type="datetime-local" class="custom-input"><button onclick="saveSettings()" class="btn-main">Ø­ÙØ¸</button><button onclick="deleteTimer()" class="btn-main" style="background:var(--danger); margin-top:10px">Ø­Ø°Ù Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ ğŸ—‘ï¸</button><button onclick="resetOrders()" class="btn-main" style="background:var(--danger); margin-top:20px">ØªØµÙÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button></div>
        <button onclick="document.getElementById('dashModal').style.display='none'" style="margin-top:10px; color:red; background:none; border:none; width:100%; cursor:pointer">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<div class="modal" id="passModal"><div class="modal-content" style="text-align:center"><h3>ğŸ” Ø§Ù„Ù…Ø±ÙˆØ±</h3><input type="password" id="passInp" class="custom-input"><button onclick="login()" class="btn-main">Ø¯Ø®ÙˆÙ„</button></div></div>
<div class="toast-box" id="toast">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© âœ…</div>
<a href="https://wa.me/201070411245" class="wa-float"><i class="fab fa-whatsapp"></i></a>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, doc, deleteDoc, updateDoc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = { apiKey: "AIzaSyCdsXCuOtmne7g5oytUtOTZpOFgNEcoChA", authDomain: "shefo-store-e21df.firebaseapp.com", projectId: "shefo-store-e21df", storageBucket: "shefo-store-e21df.firebasestorage.app", messagingSenderId: "115869788089", appId: "1:115869788089:web:dee7128b974d310abab868" };
    const app = initializeApp(firebaseConfig), db = getFirestore(app);
    const pColl = collection(db,"products"), cColl = collection(db,"categories"), sDoc = doc(db,"settings","mainConfig"), coupDoc = doc(db,"settings","couponConfig"), oColl = collection(db,"orders");

    let products = [], categories = [], cart = [], coupon = null, config = {};

    async function fetchData() {
        const cSnap = await getDocs(cColl); categories = cSnap.docs.map(d => ({id:d.id, ...d.data()})); renderCatsUI();
        const sSnap = await getDoc(sDoc); if(sSnap.exists()){ config = sSnap.data(); applyConfig(); }
        const pSnap = await getDocs(pColl); products = pSnap.docs.map(d => ({id:d.id, ...d.data()})); renderProd('all');
        const coupSnap = await getDoc(coupDoc); 
        if(coupSnap.exists()){ coupon = coupSnap.data(); document.getElementById('promoLabel').innerText = `Ø§Ø³ØªØ®Ø¯Ù… ÙƒÙˆØ¯: ${coupon.code}`; document.getElementById('promoBtn').style.display='inline-flex'; }
        else { coupon = null; document.getElementById('promoBtn').style.display='none'; }
        updateStats();
    }

    function renderCatsUI() {
        const nav = document.getElementById('navCatsUI'); nav.innerHTML = `<button onclick="renderProd('all', this)" class="nav-item active">Ø§Ù„ÙƒÙ„</button>`;
        categories.forEach(c => { nav.innerHTML += `<button onclick="renderProd('${c.name}', this)" class="nav-item">${c.name}</button>`; });
        document.getElementById('nPCatSelect').innerHTML = categories.map(c => `<option value="${c.name}">${c.name}</option>`).join('');
        document.getElementById('catsAdminList').innerHTML = categories.map(c => `<div class="admin-item"><span>${c.name}</span><i class="fas fa-trash" onclick="delCat('${c.id}')" style="color:red; cursor:pointer"></i></div>`).join('');
    }

    function applyConfig() {
        document.getElementById('tickerText').innerText = config.ticker || "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø´ÙŠÙÙˆ Ø³ØªÙˆØ±";
        if(window.timerInt) clearInterval(window.timerInt);
        if(config.timerEndTime){
            document.getElementById('timerBox').style.display = 'inline-block';
            window.timerInt = setInterval(() => {
                const diff = new Date(config.timerEndTime).getTime() - new Date().getTime();
                if(diff <= 0){ document.getElementById('countdown').innerText = "00:00:00"; return; }
                const h = Math.floor(diff/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000);
                document.getElementById('countdown').innerText = `${h<10?'0'+h:h}:${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
            }, 1000);
        } else { document.getElementById('timerBox').style.display = 'none'; }
    }

    window.copyPromoCode = () => {
        if(coupon && coupon.code){
            navigator.clipboard.writeText(coupon.code).then(() => {
                const old = document.getElementById('promoLabel').innerText;
                document.getElementById('promoLabel').innerText = "âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!";
                setTimeout(() => document.getElementById('promoLabel').innerText = old, 2000);
            });
        }
    };

    function initClock() {
        const face = document.getElementById('clockFace');
        for(let i=1; i<=12; i++){
            const num = document.createElement('div'); num.className = 'clock-number'; num.innerText = i;
            const rad = (i * 30) * (Math.PI / 180);
            num.style.left = `${70 + 58 * Math.sin(rad)}px`; num.style.top = `${70 - 58 * Math.cos(rad)}px`; face.appendChild(num);
        }
        setInterval(() => {
            const n = new Date();
            document.getElementById('secondHand').style.transform = `translateX(-50%) rotate(${n.getSeconds()*6}deg)`;
            document.getElementById('minuteHand').style.transform = `translateX(-50%) rotate(${n.getMinutes()*6}deg)`;
            document.getElementById('hourHand').style.transform = `translateX(-50%) rotate(${(n.getHours()%12)*30 + n.getMinutes()*0.5}deg)`;
        }, 1000);
    }

    window.renderProd = (cat, btn) => {
        if(btn){ document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
        const div = document.getElementById('products'); div.innerHTML = "";
        products.filter(p => cat === 'all' || p.cat === cat).forEach(p => {
            let q = parseInt(p.qty)||0;
            let stockHtml = q<=0 ? '<span style="color:#666">Ù†ÙØ¯ âŒ</span>' : q<=2 ? `<span class="stock-warning">ğŸ”¥ Ù…ØªØ¨Ù‚ÙŠ ${q} ÙÙ‚Ø·!</span>` : `<span style="color:var(--success)">Ù…ØªØ§Ø­: ${q} Ù‚Ø·Ø¹Ø©</span>`;
            div.innerHTML += `<div class="card"><img src="${p.img}"><div class="card-content"><h4>${p.name}</h4>${stockHtml}<div style="display:flex; justify-content:space-between; align-items:center; margin-top:10px"><span style="font-weight:bold">${p.price} Ø¬.Ù…</span><button style="background:var(--primary); border:none; width:40px; height:40px; border-radius:10px; cursor:pointer" onclick="addToCart('${p.id}')" ${q<=0?'disabled':''}><i class="fas fa-plus"></i></button></div></div></div>`;
        });
    };

    window.addToCart = (id) => {
        cart.push(products.find(x => x.id === id)); document.getElementById('cartCount').innerText = cart.length;
        document.getElementById('toast').classList.add('show'); setTimeout(() => document.getElementById('toast').classList.remove('show'), 2000);
        renderCart();
    };

    window.renderCart = () => {
        let total = 0; document.getElementById('cartItems').innerHTML = cart.map((p, i) => { total += parseInt(p.price); return `<div style="display:flex; justify-content:space-between; padding:5px 0; border-bottom:1px solid #1e293b"><span>${p.name}</span><i class="fas fa-times" onclick="rem(${i})" style="color:red; cursor:pointer"></i></div>`; }).join('');
        let disc = 0; if(coupon && document.getElementById('couponInput').value === coupon.code){ if(new Date() < new Date(coupon.expiry)){ disc = coupon.type === 'percent' ? total * (parseInt(coupon.val)/100) : parseInt(coupon.val); document.getElementById('discountMsg').innerText = `Ø®ØµÙ… Ù…ÙØ¹Ù„: -${disc} Ø¬.Ù…`; document.getElementById('discountMsg').style.display = 'block'; } else alert("Ø§Ù„ÙƒÙˆØ¯ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©!"); }
        const final = Math.max(0, total - disc); document.getElementById('totalPrice').innerText = final + " Ø¬.Ù…"; return final;
    };

    window.rem = (i) => { cart.splice(i,1); renderCart(); document.getElementById('cartCount').innerText = cart.length; };
    window.applyCoupon = () => { renderCart(); };

    window.sendOrder = async () => {
        const n = document.getElementById('cName').value, ph = document.getElementById('cPhone').value, city = document.getElementById('cCity').value;
        if(!n || !ph || !city || cart.length === 0) return alert("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©!");
        const total = renderCart(), cost = cart.reduce((s, x) => s + (parseInt(x.costPrice)||0), 0);
        await addDoc(oColl, { total, cost, date: new Date().toISOString() });
        const itemsMsg = cart.map(p => `â€¢ ${p.name}`).join('%0a');
        window.open(`https://wa.me/201070411245?text=Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù†: ${n}%0aØ±Ù‚Ù…: ${ph}%0aØ§Ù„Ù…Ø­Ø§ÙØ¸Ø©: ${city}%0a----------------%0a${itemsMsg}%0a----------------%0aØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¬.Ù…`);
        cart = []; renderCart(); document.getElementById('cartCount').innerText = 0;
    };

    window.login = () => { if(document.getElementById('passInp').value === "ziad1234") { document.getElementById('passModal').style.display='none'; document.getElementById('dashModal').style.display='grid'; updateStats(); renderAdminList(); } };
    async function updateStats() {
        const snap = await getDocs(oColl); let rev = 0, cost = 0; snap.forEach(d => { rev += d.data().total; cost += (d.data().cost || 0); });
        document.getElementById('realRevenue').innerText = rev + " Ø¬.Ù…"; document.getElementById('netProfit').innerText = (rev - cost) + " Ø¬.Ù…";
    }

    window.addProduct = async () => {
        const file = document.getElementById('nPFile').files[0], url = document.getElementById('nPImgUrl').value;
        const save = (img) => addDoc(pColl, { name: document.getElementById('nPName').value, price: document.getElementById('nPPrice').value, costPrice: document.getElementById('nPCost').value, qty: document.getElementById('nPQty').value, cat: document.getElementById('nPCatSelect').value, img }).then(() => { alert("ØªÙ… âœ…"); fetchData(); });
        if(file){
            const reader = new FileReader(); reader.onload = (e) => {
                const img = new Image(); img.onload = () => {
                    const canvas = document.createElement('canvas'); canvas.width = 400; canvas.height = 400;
                    canvas.getContext('2d').drawImage(img, 0, 0, 400, 400); save(canvas.toDataURL('image/jpeg', 0.6));
                }; img.src = e.target.result;
            }; reader.readAsDataURL(file);
        } else if(url) save(url); else alert("Ø§Ø±ÙØ¹ ØµÙˆØ±Ø©!");
    };

    function renderAdminList() { document.getElementById('adminList').innerHTML = products.map(p => `<div class="admin-item"><span>${p.name}</span><div style="display:flex;align-items:center;gap:5px"><input type="number" class="qty-input" value="${p.qty}" onchange="updateQty('${p.id}',this.value)"><i class="fas fa-trash" onclick="delProd('${p.id}')" style="color:red;cursor:pointer"></i></div></div>`).join(''); }
    window.updateQty = async (id, newQty) => { await updateDoc(doc(db, "products", id), { qty: newQty }); fetchData(); };
    window.delProd = async (id) => { if(confirm("Ø­Ø°ÙØŸ")){ await deleteDoc(doc(db, "products", id)); fetchData(); renderAdminList(); }};
    window.addManualOrder = async () => { await addDoc(oColl, { total: parseInt(document.getElementById('mPrice').value), cost: parseInt(document.getElementById('mCost').value), date: new Date().toISOString() }); alert("ØªÙ…"); updateStats(); };
    window.addCategory = async () => { await addDoc(cColl, {name: document.getElementById('newCatInput').value}); fetchData(); };
    window.delCat = async (id) => { await deleteDoc(doc(db, "categories", id)); fetchData(); };
    window.saveCoupon = async () => { await setDoc(coupDoc, {code: document.getElementById('nCCode').value, val: document.getElementById('nCVal').value, type: document.getElementById('nCType').value, expiry: document.getElementById('nCExpiry').value}); alert("ØªÙ…"); fetchData(); };
    window.deleteCoupon = async () => { await deleteDoc(coupDoc); alert("ØªÙ… Ø§Ù„Ø­Ø°Ù"); fetchData(); };
    window.saveSettings = async () => { await setDoc(sDoc, {ticker: document.getElementById('nTicker').value, timerEndTime: document.getElementById('nTimerEnd').value}); alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª âœ…"); fetchData(); };
    window.deleteTimer = async () => { await updateDoc(sDoc, { timerEndTime: "" }); alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ø¯Ø§Ø¯ âœ…"); fetchData(); };
    window.resetOrders = async () => { if(confirm("Ù…Ø³Ø­ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§ØªØŸ")){ const s = await getDocs(oColl); s.forEach(async d => await deleteDoc(d.ref)); updateStats(); } };

    window.triggerSecret = () => { window.c = (window.c||0)+1; if(window.c === 5) document.getElementById('passModal').style.display='grid'; setTimeout(()=>window.c=0, 2000); };
    window.toggleTab = (t) => { ['prod','cats','manual','coup','settings'].forEach(x => document.getElementById('tab-'+x).style.display='none'); document.getElementById('tab-'+t).style.display='block'; };

    window.onload = () => {
        initClock(); fetchData();
        setTimeout(() => document.getElementById('splash').style.display='none', 2000);
        setInterval(() => { if(products.length){
            const names = ["Ø£Ø­Ù…Ø¯","Ù…Ø­Ù…Ø¯","Ø³Ø§Ø±Ø©"], cities = ["Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©","Ø§Ù„Ø¬ÙŠØ²Ø©","Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©"];
            document.getElementById('notifyMsg').innerText = `${names[Math.floor(Math.random()*3)]} Ù…Ù† ${cities[Math.floor(Math.random()*3)]} Ø·Ù„Ø¨ Ù…Ù†ØªØ¬Ø§Ù‹ Ø§Ù„Ø¢Ù†`;
        }}, 20000);
    };
    window.scrollToCheckout = () => document.getElementById('checkoutSection').scrollIntoView({behavior:'smooth'});
    window.searchProducts = () => { const term = document.getElementById('searchInp').value.toLowerCase(); const div = document.getElementById('products'); div.innerHTML = ""; products.filter(p => p.name.toLowerCase().includes(term)).forEach(p => { renderProd('all'); }); };
</script>
</body>
</html>

