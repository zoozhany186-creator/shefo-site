<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>SHEFO Store | Ù…ØªØ¬Ø± Ø´ÙŠÙÙˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&display=swap" rel="stylesheet">

<style>
/* --- 1. Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… --- */
:root {
    --primary: #6366f1; 
    --accent: #ec4899; 
    --dark: #0f172a; 
    --darker: #020617; 
    --surface: #1e293b; 
    --text: #f8fafc; 
    --success: #22c55e; 
    --danger: #ef4444;
}
* {box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent;}
body {
    margin: 0; font-family: 'Tajawal', sans-serif;
    background: var(--darker); color: var(--text); padding-bottom: 0;
}

/* --- 2. Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
header {
    background: rgba(15, 23, 42, 0.95); padding: 15px 20px;
    position: sticky; top: 0; z-index: 50; border-bottom: 1px solid #334155;
    display: flex; justify-content: space-between; align-items: center;
    backdrop-filter: blur(5px);
}
.header-right { display: flex; align-items: center; gap: 15px; }
.brand {
    font-size: 1.6rem; font-weight: 900;
    background: linear-gradient(to right, var(--primary), var(--accent));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    cursor: pointer; user-select: none;
}
.head-socials { display: flex; gap: 12px; border-right: 1px solid #334155; padding-right: 15px; }
.head-socials a { color: #94a3b8; font-size: 1.1rem; transition: 0.3s; }
.head-socials a:hover { color: white; transform: scale(1.2); }
.head-socials a:nth-child(1):hover { color: #25D366; }
.head-socials a:nth-child(2):hover { color: #1877F2; }
.head-socials a:nth-child(3):hover { color: #E1306C; }

.cart-wrap {position: relative; font-size: 1.4rem; cursor: pointer; color: white;}
.badge {
    position: absolute; top: -8px; left: -8px; background: var(--success);
    color: black; font-weight: bold; font-size: 0.7rem; padding: 2px 6px; border-radius: 10px;
}

/* --- 3. Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù… --- */
.nav-scroller {
    padding: 12px 15px; display: flex; gap: 10px; overflow-x: auto;
    background: var(--dark); border-bottom: 1px solid #1e293b;
    scrollbar-width: none;
}
.nav-scroller::-webkit-scrollbar {display: none;}
.nav-btn {
    background: var(--surface); color: #cbd5e1; border: 1px solid #334155;
    padding: 8px 18px; border-radius: 25px; white-space: nowrap; cursor: pointer;
    transition: 0.3s; font-family: inherit; font-size: 0.95rem;
}
.nav-btn.active, .nav-btn:hover {
    background: var(--primary); color: white; border-color: var(--primary); transform: translateY(-2px);
}

/* --- 4. Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª --- */
.hero {
    margin: 20px 15px; padding: 40px 20px; border-radius: 20px;
    background: linear-gradient(135deg, var(--dark), #312e81);
    text-align: center; border: 1px solid #334155;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}
#products {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 15px; padding: 15px;
}
.card {
    background: var(--surface); border-radius: 15px; padding: 10px;
    border: 1px solid #334155; transition: 0.3s; display: flex; flex-direction: column;
}
.card:hover { transform: translateY(-5px); border-color: var(--primary); }
.card img {
    width: 100%; height: 160px; object-fit: cover; border-radius: 12px; margin-bottom: 10px;
}
.card h4 {margin: 5px 0; font-size: 1rem; flex-grow: 1;}
.price-tag {color: var(--primary); font-weight: bold; font-size: 1.1rem;}
.cat-badge {
    font-size: 0.7rem; color: #94a3b8; background: #0f172a; 
    padding: 2px 8px; border-radius: 6px; align-self: flex-start; margin-bottom: 5px;
}
.add-btn {
    width: 100%; margin-top: 10px; background: var(--primary); border: none;
    color: white; padding: 10px; border-radius: 10px; cursor: pointer; font-weight: bold;
}

/* --- 5. Ù‚Ø³Ù… Ø§Ù„Ø¯ÙØ¹ --- */
.checkout-section {
    background: #111827; margin: 20px; padding: 25px;
    border-radius: 20px; border: 1px solid #1f2937;
    box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
}
.checkout-header {
    display: flex; align-items: center; gap: 10px; margin-bottom: 20px;
    font-size: 1.2rem; font-weight: bold; color: white;
}
.mini-cart {
    background: #0f172a; padding: 15px; border-radius: 12px;
    margin-bottom: 20px; border: 1px dashed #374151;
}
.cart-item-row {
    display: flex; justify-content: space-between; padding: 8px 0;
    border-bottom: 1px solid #1f2937; font-size: 0.9rem;
}
.cart-total-row {
    display: flex; justify-content: space-between; margin-top: 10px;
    font-weight: bold; font-size: 1.1rem; color: white;
}
.custom-input {
    width: 100%; padding: 14px; background: #1f2937; border: 1px solid #374151;
    color: white; border-radius: 12px; font-family: inherit; font-size: 0.95rem; margin-bottom: 10px;
}
.custom-input:focus {border-color: var(--success);}
/* ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª */
input[type="file"].custom-input {
    padding: 10px; background: var(--dark); cursor: pointer;
}

.btn-checkout {
    width: 100%; background: linear-gradient(90deg, #22c55e, #16a34a);
    color: black; font-weight: bold; padding: 15px; border: none;
    border-radius: 12px; font-size: 1.1rem; cursor: pointer; margin-top: 10px;
    display: flex; align-items: center; justify-content: center; gap: 10px;
}

/* --- 6. Ø§Ù„ÙÙˆØªØ± --- */
footer {
    background-color: #020617; text-align: center;
    padding: 40px 20px; margin-top: 40px; border-top: 1px solid #1e293b;
}
.footer-brand {font-size: 1.5rem; font-weight: bold; color: white; margin-bottom: 20px; display: block;}
.footer-links {display: flex; justify-content: center; gap: 25px; margin-bottom: 25px; flex-wrap: wrap;}
.footer-links a {color: #38bdf8; text-decoration: none; font-size: 1rem; font-weight: 500;}
.copyright {color: #94a3b8; font-size: 0.9rem;}

/* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
.modal {
    position: fixed; inset: 0; background: rgba(0,0,0,0.95);
    display: none; align-items: center; justify-content: center; z-index: 100;
}
.modal-content {
    background: var(--surface); width: 95%; max-width: 500px;
    padding: 20px; border-radius: 15px; border: 1px solid #475569;
    max-height: 90vh; overflow-y: auto;
}
.admin-item {display: flex; justify-content: space-between; padding: 10px; background: var(--dark); margin-bottom: 5px; border-radius: 6px;}
.bg-red {background: var(--danger); color: white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;}
.wa-float {
    position: fixed; bottom: 20px; left: 20px; background: #25D366;
    color: white; width: 60px; height: 60px; border-radius: 50%;
    display: grid; place-items: center; font-size: 30px; z-index: 90;
    box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4); text-decoration: none;
}
</style>
</head>
<body>

<header>
    <div class="header-right">
        <div class="brand" id="secretBtn" onclick="triggerSecret()">SHEFO</div>
        <div class="head-socials">
            <a href="https://wa.me/201070411245" target="_blank"><i class="fab fa-whatsapp"></i></a>
            <a href="https://www.facebook.com/share/1DYwnY6RxZ/" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com/shefo_1k" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
    </div>
    <div class="cart-wrap" onclick="scrollToCheckout()">
        <i class="fas fa-shopping-cart"></i>
        <span class="badge" id="cartCount">0</span>
    </div>
</header>

<nav class="nav-scroller">
    <button onclick="renderProducts('all', this)" class="nav-btn active">Ø§Ù„ÙƒÙ„</button>
    <button onclick="renderProducts('Ø³Ø§Ø¹Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ', this)" class="nav-btn">Ø³Ø§Ø¹Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ</button>
    <button onclick="renderProducts('Ø³Ø§Ø¹Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ', this)" class="nav-btn">Ø³Ø§Ø¹Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ</button>
    <button onclick="renderProducts('Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ', this)" class="nav-btn">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ</button> <button onclick="renderProducts('Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ', this)" class="nav-btn">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ</button> <button onclick="renderProducts('Ø´Ø±Ø¨Ø§Øª', this)" class="nav-btn">Ø´Ø±Ø¨Ø§Øª</button>
    <button onclick="renderProducts('Ø¨ÙˆÙƒØ³Ø±Ø§Øª', this)" class="nav-btn">Ø¨ÙˆÙƒØ³Ø±Ø§Øª</button>
    <button onclick="renderProducts('Ø¨Ø±ÙØ§Ù† Ø±Ø¬Ø§Ù„ÙŠ', this)" class="nav-btn">Ø¨Ø±ÙØ§Ù† Ø±Ø¬Ø§Ù„ÙŠ</button>
    <button onclick="renderProducts('Ø¨Ø±ÙØ§Ù† Ø­Ø±ÙŠÙ…ÙŠ', this)" class="nav-btn">Ø¨Ø±ÙØ§Ù† Ø­Ø±ÙŠÙ…ÙŠ</button>
    <button onclick="renderProducts('ÙƒØ§Ø¨', this)" class="nav-btn">ÙƒØ§Ø¨</button>
    <button onclick="renderProducts('Ø´Ù†Ø· Ø­Ø±ÙŠÙ…ÙŠ', this)" class="nav-btn">Ø´Ù†Ø· Ø­Ø±ÙŠÙ…ÙŠ</button>
    <button onclick="renderProducts('Ø£Ø­Ø²Ù…Ø©', this)" class="nav-btn">Ø£Ø­Ø²Ù…Ø©</button>
</nav>

<div class="hero">
    <h2>ğŸ”¥ SHEFO STORE</h2>
    <p>Ø£Ø±Ù‚Ù‰ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø¨Ø£Ø³Ø¹Ø§Ø± Ø®ÙŠØ§Ù„ÙŠØ©</p>
</div>

<main id="products"></main>

<div class="checkout-section" id="checkoutSection">
    <div class="checkout-header"><i class="fas fa-truck"></i> Ø§ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</div>
    <div class="mini-cart">
        <div id="cartListStub" style="color:#9ca3af; text-align:center; font-size:0.9rem">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>
        <div id="cartItemsContainer"></div>
        <div class="cart-total-row">
            <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
            <span id="displayTotal">0 Ø¬.Ù…</span>
        </div>
        <div id="discountDisplay" style="color:var(--success); font-size:0.9rem; margin-top:5px; display:none"></div>
    </div>
    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
        <input id="userCoupon" class="custom-input" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…" style="margin:0">
        <button onclick="applyUserCoupon()" class="custom-input" style="width: auto; background: var(--success); color: black; font-weight: bold; cursor: pointer; border:none">ØªØ·Ø¨ÙŠÙ‚</button>
    </div>
    <input id="cName" class="custom-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
    <input id="cPhone" type="tel" class="custom-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
    <select id="cCity" class="custom-input">
        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
        <option value="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option>
        <option value="Ø§Ù„Ø¬ÙŠØ²Ø©">Ø§Ù„Ø¬ÙŠØ²Ø©</option>
        <option value="Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©">Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</option>
        <option value="Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©">Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©</option>
        <option value="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
        <option value="Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©">Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©</option>
        <option value="Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©">Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©</option>
        <option value="Ø§Ù„Ø¨Ø­ÙŠØ±Ø©">Ø§Ù„Ø¨Ø­ÙŠØ±Ø©</option>
        <option value="Ø§Ù„ØºØ±Ø¨ÙŠØ©">Ø§Ù„ØºØ±Ø¨ÙŠØ©</option>
        <option value="Ø¨ÙˆØ±Ø³Ø¹ÙŠØ¯">Ø¨ÙˆØ±Ø³Ø¹ÙŠØ¯</option>
        <option value="Ø¯Ù…ÙŠØ§Ø·">Ø¯Ù…ÙŠØ§Ø·</option>
        <option value="Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©">Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©</option>
        <option value="Ø§Ù„Ø³ÙˆÙŠØ³">Ø§Ù„Ø³ÙˆÙŠØ³</option>
        <option value="ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®">ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®</option>
        <option value="Ø§Ù„ÙÙŠÙˆÙ…">Ø§Ù„ÙÙŠÙˆÙ…</option>
        <option value="Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ">Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ</option>
        <option value="Ø§Ù„Ù…Ù†ÙŠØ§">Ø§Ù„Ù…Ù†ÙŠØ§</option>
        <option value="Ø£Ø³ÙŠÙˆØ·">Ø£Ø³ÙŠÙˆØ·</option>
        <option value="Ø³ÙˆÙ‡Ø§Ø¬">Ø³ÙˆÙ‡Ø§Ø¬</option>
        <option value="Ù‚Ù†Ø§">Ù‚Ù†Ø§</option>
        <option value="Ø§Ù„Ø£Ù‚ØµØ±">Ø§Ù„Ø£Ù‚ØµØ±</option>
        <option value="Ø£Ø³ÙˆØ§Ù†">Ø£Ø³ÙˆØ§Ù†</option>
        <option value="Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±">Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±</option>
        <option value="Ø§Ù„ÙˆØ§Ø¯Ù‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯">Ø§Ù„ÙˆØ§Ø¯Ù‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯</option>
        <option value="Ù…Ø·Ø±ÙˆØ­">Ù…Ø·Ø±ÙˆØ­</option>
        <option value="Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡">Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡</option>
        <option value="Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡">Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡</option>
    </select>
    <input id="cAddress" class="custom-input" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„">
    <button onclick="sendOrder()" class="btn-checkout"><i class="fab fa-whatsapp"></i> Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<footer>
    <div class="footer-brand">SHEFO</div>
    <div class="footer-links">
        <a href="https://wa.me/201070411245" target="_blank">ÙˆØ§ØªØ³Ø§Ø¨</a>
        <a href="https://www.facebook.com/share/1DYwnY6RxZ/" target="_blank">ÙÙŠØ³Ø¨ÙˆÙƒ</a>
        <a href="https://www.instagram.com/shefo_1k" target="_blank">Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</a>
    </div>
    <div class="copyright">SHEFO Â© 2026</div>
</footer>
<a href="https://wa.me/201070411245" class="wa-float"><i class="fab fa-whatsapp"></i></a>

<div class="modal" id="passModal">
    <div class="modal-content" style="text-align: center;">
        <h3>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
        <input type="password" id="adminPass" class="custom-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="checkPass()" class="btn-checkout" style="margin-bottom:10px">Ø¯Ø®ÙˆÙ„</button>
        <button onclick="toggleModal('passModal')" class="bg-red" style="width:100%">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
</div>

<div class="modal" id="dashModal">
    <div class="modal-content">
        <h2 style="color:var(--primary); text-align:center">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
        <div style="display:flex; gap:10px; margin-bottom:15px">
            <button onclick="showTab('tabProd')" class="nav-btn active">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
            <button onclick="showTab('tabCoupon')" class="nav-btn">Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</button>
        </div>

        <div id="tabProd">
            <h4>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h4>
            <input id="newPName" class="custom-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
            
            <label style="color:#aaa; font-size:0.9rem">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬:</label>
            <input type="file" id="newPImgFile" class="custom-input" accept="image/*">
            
            <input id="newPPrice" type="number" class="custom-input" placeholder="Ø§Ù„Ø³Ø¹Ø±">
            
            <label style="color:#aaa; font-size:0.9rem">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…:</label>
            <select id="newPCat" class="custom-input">
                <option value="Ø³Ø§Ø¹Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ">Ø³Ø§Ø¹Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ</option>
                <option value="Ø³Ø§Ø¹Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ">Ø³Ø§Ø¹Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ</option>
                <option value="Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ</option> <option value="Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø­Ø±ÙŠÙ…ÙŠ</option> <option value="Ø´Ø±Ø¨Ø§Øª">Ø´Ø±Ø¨Ø§Øª</option>
                <option value="Ø¨ÙˆÙƒØ³Ø±Ø§Øª">Ø¨ÙˆÙƒØ³Ø±Ø§Øª</option>
                <option value="Ø¨Ø±ÙØ§Ù† Ø±Ø¬Ø§Ù„ÙŠ">Ø¨Ø±ÙØ§Ù† Ø±Ø¬Ø§Ù„ÙŠ</option>
                <option value="Ø¨Ø±ÙØ§Ù† Ø­Ø±ÙŠÙ…ÙŠ">Ø¨Ø±ÙØ§Ù† Ø­Ø±ÙŠÙ…ÙŠ</option>
                <option value="ÙƒØ§Ø¨">ÙƒØ§Ø¨</option>
                <option value="Ø´Ù†Ø· Ø­Ø±ÙŠÙ…ÙŠ">Ø´Ù†Ø· Ø­Ø±ÙŠÙ…ÙŠ</option>
                <option value="Ø£Ø­Ø²Ù…Ø©">Ø£Ø­Ø²Ù…Ø©</option>
                <option value="Ø§Ø®Ø±Ù‰">Ø§Ø®Ø±Ù‰</option>
            </select>
            
            <button onclick="addNewProduct()" class="btn-checkout">Ù†Ø´Ø±</button>
            <hr style="border-color:#333; margin:20px 0">
            <div id="adminProdList" style="max-height:200px; overflow-y:auto"></div>
        </div>

        <div id="tabCoupon" style="display:none">
            <input id="newCodeName" class="custom-input" placeholder="Ø§Ù„ÙƒÙˆØ¯">
            <input id="newCodeVal" type="number" class="custom-input" placeholder="Ø§Ù„Ø®ØµÙ…">
            <button onclick="setCoupon()" class="btn-checkout">Ø­ÙØ¸</button>
            <p>Ø§Ù„Ø­Ø§Ù„ÙŠ: <strong id="activeCouponDisplay">--</strong></p>
        </div>
        <button onclick="toggleModal('dashModal')" class="bg-red" style="width:100%; margin-top:10px">Ø®Ø±ÙˆØ¬</button>
    </div>
</div>

<script>
let defaultProducts = [
    {id:1, name:"Ø³Ø§Ø¹Ø© Ø±ÙˆÙ„ÙƒØ³", price:850, img:"https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=300", cat:"Ø³Ø§Ø¹Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ"},
    {id:2, name:"Ø³Ù„Ø³Ù„Ø© ÙØ¶Ø©", price:200, img:"https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=300", cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø±Ø¬Ø§Ù„ÙŠ"},
];

let products = JSON.parse(localStorage.getItem('shefo_products')) || defaultProducts;
let activeCoupon = JSON.parse(localStorage.getItem('shefo_coupon')) || {code:"", val:0};
let cart = [];
let clickCount = 0;

window.onload = function() {
    renderProducts('all', document.querySelector('.nav-btn'));
    updateCouponDisplay();
};

function saveData() {
    // ØªÙ†Ø¨ÙŠÙ‡: Ù„Ùˆ Ø§Ù„ØµÙˆØ± ÙƒØªÙŠØ±Ø© ÙˆÙƒØ¨ÙŠØ±Ø© localStorage Ù…Ø´ Ù‡ØªÙƒÙÙŠ
    try {
        localStorage.setItem('shefo_products', JSON.stringify(products));
        localStorage.setItem('shefo_coupon', JSON.stringify(activeCoupon));
    } catch (e) {
        alert("ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…Ù…ØªÙ„Ø¦Ø©! Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ± Ø£ØµØºØ±.");
    }
}

// Ø§Ù„Ø¹Ø±Ø¶
const pDiv = document.getElementById('products');
function renderProducts(cat, btn) {
    if(btn) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }
    pDiv.innerHTML = "";
    let found = false;
    products.forEach((p, index) => {
        if(cat === 'all' || p.cat === cat) {
            found = true;
            pDiv.innerHTML += `
            <div class="card">
                <img src="${p.img}" onerror="this.src='https://via.placeholder.com/300?text=Shefo'">
                <div class="cat-badge">${p.cat}</div>
                <h4>${p.name}</h4>
                <div class="price-tag">${p.price} Ø¬.Ù…</div>
                <button class="add-btn" onclick="addToCart(${index})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
            </div>`;
        }
    });
    if(!found) pDiv.innerHTML = "<p style='grid-column:1/-1; text-align:center; color:#888'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù‡Ù†Ø§</p>";
}

function addToCart(index) {
    cart.push(products[index]);
    document.getElementById('cartCount').innerText = cart.length;
    renderCartSection();
    scrollToCheckout();
}

function scrollToCheckout() { document.getElementById('checkoutSection').scrollIntoView({behavior: 'smooth'}); }

function renderCartSection() {
    const container = document.getElementById('cartItemsContainer');
    const stub = document.getElementById('cartListStub');
    if(cart.length === 0) {
        container.innerHTML = ""; stub.style.display = 'block';
        document.getElementById('displayTotal').innerText = "0 Ø¬.Ù…"; return 0;
    }
    stub.style.display = 'none'; container.innerHTML = "";
    let total = 0;
    cart.forEach((p, i) => {
        total += parseInt(p.price);
        container.innerHTML += `
        <div class="cart-item-row">
            <span>${p.name}</span>
            <div><span>${p.price}</span> <span onclick="removeFromCart(${i})" style="color:#ef4444; cursor:pointer; margin-right:8px">âŒ</span></div>
        </div>`;
    });
    let discount = 0;
    let codeInput = document.getElementById('userCoupon').value;
    if(codeInput === activeCoupon.code && activeCoupon.code !== "") {
        discount = parseInt(activeCoupon.val);
        document.getElementById('discountDisplay').style.display = "block";
        document.getElementById('discountDisplay').innerText = `ØªÙ… Ø®ØµÙ… ${discount} Ø¬.Ù…`;
    } else { document.getElementById('discountDisplay').style.display = "none"; }
    let finalTotal = Math.max(0, total - discount);
    document.getElementById('displayTotal').innerText = finalTotal + " Ø¬.Ù…";
    return finalTotal;
}

function removeFromCart(i) { cart.splice(i, 1); document.getElementById('cartCount').innerText = cart.length; renderCartSection(); }
function applyUserCoupon() { renderCartSection(); alert("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚"); }

function sendOrder() {
    if(cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ©!");
    let name = document.getElementById('cName').value;
    let phone = document.getElementById('cPhone').value;
    let city = document.getElementById('cCity').value;
    let addr = document.getElementById('cAddress').value;
    if(!name || !phone || !city) return alert("Ø§ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
    let finalTotal = renderCartSection();
    let items = cart.map(p => `â–ªï¸ ${p.name}`).join("%0a");
    let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯* ğŸš€%0ağŸ‘¤ ${name}%0ağŸ“± ${phone}%0ağŸ™ï¸ ${city} - ${addr}%0a--------------------%0a${items}%0a--------------------%0ağŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${finalTotal} Ø¬.Ù…*`;
    window.open(`https://wa.me/201070411245?text=${msg}`);
    cart=[]; document.getElementById('cartCount').innerText=0; renderCartSection();
}

// --- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±ÙØ¹ Ø§Ù„ØµÙˆØ± ---
function triggerSecret() {
    clearTimeout(window.secretTimer); clickCount++;
    if(clickCount === 5) { toggleModal('passModal'); clickCount = 0; }
    window.secretTimer = setTimeout(() => clickCount = 0, 1000);
}
function checkPass() {
    if(document.getElementById('adminPass').value === "ziad1234") {
        toggleModal('passModal'); toggleModal('dashModal'); renderAdminList(); document.getElementById('adminPass').value = "";
    } else { alert("Ø®Ø·Ø£"); }
}
function showTab(tabId) {
    document.getElementById('tabProd').style.display = 'none'; document.getElementById('tabCoupon').style.display = 'none';
    document.getElementById(tabId).style.display = 'block';
}

function addNewProduct() {
    let name = document.getElementById('newPName').value;
    let price = document.getElementById('newPPrice').value;
    let cat = document.getElementById('newPCat').value;
    let fileInput = document.getElementById('newPImgFile');
    
    if(!name || !price) { alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø±"); return; }

    // Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬
    const saveProduct = (imgSrc) => {
        products.push({ id: Date.now(), name, img: imgSrc, price, cat });
        saveData();
        renderProducts('all', document.querySelectorAll('.nav-btn')[0]);
        renderAdminList();
        alert("ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­ âœ…");
        // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
        document.getElementById('newPName').value = "";
        document.getElementById('newPPrice').value = "";
        fileInput.value = ""; 
    };

    if(fileInput.files && fileInput.files[0]) {
        // Ù„Ùˆ ÙÙŠÙ‡ ØµÙˆØ±Ø© Ù…Ø±ÙÙˆØ¹Ø©ØŒ Ø­ÙˆÙ„Ù‡Ø§ Ù„Ù€ Base64
        const reader = new FileReader();
        reader.onload = function(e) {
            saveProduct(e.target.result);
        };
        reader.readAsDataURL(fileInput.files[0]);
    } else {
        // Ù„Ùˆ Ù…ÙÙŠØ´ ØµÙˆØ±Ø©ØŒ Ø­Ø· ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        saveProduct("https://via.placeholder.com/300?text=No+Image");
    }
}

function renderAdminList() {
    let div = document.getElementById('adminProdList'); div.innerHTML = "";
    products.forEach((p, i) => {
        div.innerHTML += `<div class="admin-item"><span>${p.name}</span><button onclick="deleteProduct(${i})" class="bg-red">X</button></div>`;
    });
}
function deleteProduct(i) { products.splice(i, 1); saveData(); renderProducts('all'); renderAdminList(); }
function setCoupon() { activeCoupon = {code:document.getElementById('newCodeName').value, val:document.getElementById('newCodeVal').value}; saveData(); updateCouponDisplay(); alert("ØªÙ…"); }
function updateCouponDisplay() { document.getElementById('activeCouponDisplay').innerText = activeCoupon.code || "Ù„Ø§ ÙŠÙˆØ¬Ø¯"; }
function toggleModal(id) { let m = document.getElementById(id); m.style.display = (m.style.display === 'flex') ? 'none' : 'flex'; }
</script>
</body>
</html>
